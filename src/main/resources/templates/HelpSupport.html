<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help & Support | SFP Billing</title>
    <div th:replace="~{fragments/sidebar :: sidebar-css}"></div>
    <style>
        .support-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .support-hero {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 24px;
            padding: 60px 40px;
            color: white;
            text-align: center;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.2);
        }

        .support-hero h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 16px;
            letter-spacing: -1px;
        }

        .support-hero p {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto 32px;
        }

        .search-box {
            position: relative;
            max-width: 500px;
            margin: 0 auto;
        }

        .search-box i {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 1.2rem;
        }

        .search-box input {
            width: 100%;
            padding: 16px 20px 16px 56px;
            border-radius: 16px;
            border: none;
            font-size: 1rem;
            font-family: inherit;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            outline: none;
            transition: var(--transition);
        }

        .search-box input:focus {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .support-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 60px;
        }

        .support-card {
            background: white;
            padding: 32px;
            border-radius: 20px;
            border: 1px solid var(--border);
            transition: var(--transition);
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .support-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-light);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.05);
        }

        .support-card-icon {
            width: 56px;
            height: 56px;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 1.5rem;
        }

        .support-card h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-main);
        }

        .support-card p {
            color: var(--text-muted);
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .faq-section {
            background: white;
            border-radius: 24px;
            padding: 40px;
            border: 1px solid var(--border);
            margin-bottom: 60px;
        }

        .faq-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 32px;
        }

        .faq-header h2 {
            font-size: 1.75rem;
            font-weight: 800;
            letter-spacing: -0.5px;
        }

        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 24px 0;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--text-main);
            transition: var(--transition);
        }

        .faq-question:hover {
            color: var(--primary);
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            color: var(--text-muted);
            line-height: 1.7;
            margin-top: 0;
        }

        .faq-item.active .faq-answer {
            max-height: 200px;
            margin-top: 16px;
        }

        .faq-item i {
            transition: transform 0.3s ease;
            color: var(--text-muted);
        }

        .faq-item.active i {
            transform: rotate(180deg);
            color: var(--primary);
        }

        .contact-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: center;
            background: var(--sidebar);
            border-radius: 24px;
            padding: 48px;
            color: white;
        }

        .contact-info h2 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 16px;
        }

        .contact-info p {
            opacity: 0.8;
            margin-bottom: 32px;
        }

        .contact-methods {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .contact-method {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            text-decoration: none;
            color: white;
            transition: var(--transition);
        }

        .contact-method:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(8px);
        }

        .contact-method i {
            font-size: 1.25rem;
            color: var(--primary-light);
        }

        .support-img {
            display: flex;
            justify-content: center;
        }

        .support-img img {
            width: 100%;
            max-width: 380px;
            filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.3));
        }

        @media (max-width: 768px) {
            .contact-section {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .contact-method {
                justify-content: center;
            }

            .contact-method:hover {
                transform: translateY(-4px);
            }
        }
    </style>
</head>

<body>
    <aside th:replace="~{fragments/sidebar :: sidebar(activePage='help')}"></aside>

    <main class="main-content">
        <div class="support-container">
            <!-- Hero Section -->
            <section class="support-hero">
                <h1>How can we help you?</h1>
                <p>Search our knowledge base or browse categories below to find answers to your questions.</p>
                <div class="search-box">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <input type="text" placeholder="Search for articles, guides, or terms...">
                </div>
            </section>

            <!-- Support Categories -->
            <div class="support-grid">
                <a href="#" class="support-card">
                    <div class="support-card-icon"><i class="fa-solid fa-rocket"></i></div>
                    <h3>Getting Started</h3>
                    <p>Learn the basics of setting up your account and generating your first bill.</p>
                </a>
                <a href="#" class="support-card">
                    <div class="support-card-icon"><i class="fa-solid fa-credit-card"></i></div>
                    <h3>Payments & Billing</h3>
                    <p>Information about subscription plans, payment methods, and invoice history.</p>
                </a>
                <a href="#" class="support-card">
                    <div class="support-card-icon"><i class="fa-solid fa-shield-halved"></i></div>
                    <h3>Account & Security</h3>
                    <p>Manage your profile settings, change passwords, and secure your business data.</p>
                </a>
                <a href="#" class="support-card">
                    <div class="support-card-icon"><i class="fa-solid fa-screwdriver-wrench"></i></div>
                    <h3>Technical Guides</h3>
                    <p>Advanced integration steps, API documentation, and troubleshooting common issues.</p>
                </a>
            </div>

            <!-- FAQ Section -->
            <section class="faq-section">
                <div class="faq-header">
                    <i class="fa-solid fa-circle-info" style="color: var(--primary); font-size: 1.5rem;"></i>
                    <h2>Frequently Asked Questions</h2>
                </div>

                <div id="faqList">
                    <!-- Client Specific FAQs -->
                    <div th:if="${userRole == 'CLIENT'}" class="faq-item"
                        data-search="generate invoice gst compliant billing">
                        <div class="faq-question">
                            How do I generate a GST-compliant invoice?
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            To generate a GST invoice, go to "Generate Invoice" in the sidebar, choose between Product
                            or Service based billing, and fill in the client details. Ensure your business GSTIN is set
                            in your profile settings.
                        </div>
                    </div>

                    <div th:if="${userRole == 'CLIENT'}" class="faq-item"
                        data-search="export reports excel pdf download">
                        <div class="faq-question">
                            Can I export my reports to Excel?
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            Yes! Navigate to the "Reports" page, use the filters to find the data you need, and click
                            the "Export" button at the top of the table to download an Excel or PDF file.
                        </div>
                    </div>

                    <!-- Admin Specific FAQs -->
                    <div th:if="${userRole == 'ADMIN'}" class="faq-item"
                        data-search="approve client access request registration">
                        <div class="faq-question">
                            How do I approve a new client registration?
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            Navigate to the "Requests" tab in the sidebar. You will see a list of pending registrations.
                            Click on "Approve" for any business you wish to grant access to the billing platform.
                        </div>
                    </div>

                    <div th:if="${userRole == 'ADMIN'}" class="faq-item"
                        data-search="monitor global activity dashboard business">
                        <div class="faq-question">
                            Can I monitor all global billing transactions?
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            Yes. The Admin Dashboard features a "Global Billing Activity" section that shows all
                            invoices generated across the entire platform in real-time, regardless of the business.
                        </div>
                    </div>

                    <!-- General FAQs -->
                    <div class="faq-item" data-search="inventory add product service hsn sac">
                        <div class="faq-question">
                            How do I add a new product to my inventory?
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            Go to "Inventory" > "Products & Services" and click on the "Add New" button. Fill in the
                            product name, category, HSN/SAC code, and tax percentage to save it to your inventory.
                        </div>
                    </div>

                    <div class="faq-item" data-search="eway bill fail error distance hsn codes">
                        <div class="faq-question">
                            What should I do if an E-Way bill fails to generate?
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            First, verify that all mandatory fields like HSN codes, distance, and transporter ID are
                            correct. If the issue persists, check the "Global Billing Activity" on your dashboard for
                            specific error messages.
                        </div>
                    </div>
                </div>

                <!-- No Results Message -->
                <div id="noResults" style="display: none; text-align: center; padding: 40px; color: var(--text-muted);">
                    <i class="fa-solid fa-face-frown" style="font-size: 3rem; margin-bottom: 16px; opacity: 0.5;"></i>
                    <p>No questions found matching your search term.</p>
                </div>
            </section>

            <!-- Contact Section -->
            <section class="contact-section">
                <div class="contact-info">
                    <h2>Still need help?</h2>
                    <p>Our dedicated support team is available 24/7 to assist you with any questions or technical
                        issues.</p>
                    <div class="contact-methods">
                        <a href="mailto:support@sfpbilling.com" class="contact-method">
                            <i class="fa-solid fa-envelope"></i>
                            <span>support@sfpbilling.com</span>
                        </a>
                        <a href="tel:+1234567890" class="contact-method">
                            <i class="fa-solid fa-phone"></i>
                            <span>+91 123 456 7890</span>
                        </a>
                        <a href="#" class="contact-method">
                            <i class="fa-solid fa-comments"></i>
                            <span>Live Chat Support</span>
                        </a>
                    </div>
                </div>
                <div class="support-img">
                    <div
                        style="background: rgba(255,255,255,0.1); width: 300px; height: 300px; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        <i class="fa-solid fa-headset" style="font-size: 8rem; color: var(--primary-light);"></i>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
        // FAQ Accordion Logic
        document.getElementById('faqList').addEventListener('click', (e) => {
            const question = e.target.closest('.faq-question');
            if (!question) return;

            const faqItem = question.parentElement;

            // Close other items
            document.querySelectorAll('.faq-item').forEach(item => {
                if (item !== faqItem) item.classList.remove('active');
            });

            faqItem.classList.toggle('active');
        });

        // Live Search Logic
        const searchInput = document.querySelector('.search-box input');
        const faqItems = document.querySelectorAll('.faq-item');
        const noResults = document.getElementById('noResults');

        searchInput.addEventListener('input', function () {
            const term = this.value.toLowerCase().trim();
            let hasResults = false;

            faqItems.forEach(item => {
                const searchData = item.getAttribute('data-search').toLowerCase();
                const questionText = item.querySelector('.faq-question').innerText.toLowerCase();

                if (searchData.includes(term) || questionText.includes(term)) {
                    item.style.display = 'block';
                    hasResults = true;
                } else {
                    item.style.display = 'none';
                }
            });

            noResults.style.display = hasResults ? 'none' : 'block';
        });
    </script>
</body>

</html>